# Local Dev Defaults (H2)
spring.datasource.url=jdbc:h2:mem:mcp;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Let JPA create/update tables automatically for local dev
spring.jpa.hibernate.ddl-auto=update

# Server & Logging
server.port=${PORT:8080}
logging.level.root=INFO
logging.level.com.team.mcp=INFO

# App Secrets / Crypto
# Read an encryption key from the environment.
# Example (do not commit a real key): export APP_KMS_KEY=base64:aabbcc...
app.kms.key=${APP_KMS_KEY:change-me-in-env}

# (Optional) Actuator exposure for local checks
# management.endpoints.web.exposure.include=health,info
# management.endpoint.health.show-details=never

# choose 'db' or 'memory' as the search source
app.search.source=${APP_SEARCH_SOURCE:memory}

# "timeline" (default) or "db"
app.search.source=timeline

# --- Persistent H2 (file mode), survives restarts ---
spring.datasource.url=jdbc:h2:file:./.h2/mcp;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=PostgreSQL
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Let Flyway own the schema
spring.jpa.hibernate.ddl-auto=none
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# (Optional) quieter logs
spring.jpa.show-sql=false
logging.level.org.hibernate.SQL=INFO
